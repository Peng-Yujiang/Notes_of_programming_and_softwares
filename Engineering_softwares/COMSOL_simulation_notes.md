# 声学模块
目录
1. 全频段声学分析工具
    - 支持多种声学仿真
    - 所有功能集成在统一的平台中
2. 多物理场耦合
    - 振动声学（声-结构）
    - 压电材料
    - 气动声学（声音在背景流体中传播）
    - 多孔材料（biot）
    - 电声（全耦合/集总）
3. 包含多种数值计算方法
    - 有限元（FEM）
    - 边界元（BEM）
    - FEM-BEM混合模拟
    - 间断伽辽金（dG-FEM）时域显示
    - 射线追踪

![本地路径](comsol_pics\acoustic_module.png)
使用情形：
- 大部分的声学问题可由***压力声学***来解决
- 在固体中可当作弹性波来处理
- 压力声学与弹性波的耦合可使用***声-结构相互作用***多物理场接口来实现
- 流体中的声传播可使用***气动声学***
- 狭缝中或者微小结构里的声传播可使用***热黏性声学**
- 特殊情况的超声传播的问题可使用***超声波**
- ***几何声学***主要分析室内声学问题
- ***管道声学***可分析一维简化的声传播

## 一、 压力声学
1.1. 各种算法（选择研究类型）
- 有限元（FEM）
    - 模式分析
    - 特征频率
    - 频域
    - 瞬态
- 边界元（BEM）
    - 频域
- 混合BEM-FEM
    - 频域
- 间断伽辽金（dG-FEM）
    - 时域显式

1.2. 压力声学
- 压力声学域（定义传播介质）
    - 用户定义衰减
    - 大气衰减
    - 海洋衰减
- 多孔介质声学域
    - 指定Biot参数
    - Delany-Bazley-Miki模型
    - Johnson-Champoux-Allard
- 狭窄区域声学
    - 微结构里的
- 各向异性声学域
- 非线性Westervelt声学贡献（时域）

1.3. 设置边界条件
- 声源
    - 加速度/速度/位移（激励，等效于结构发声）
    - 指定压力（约束条件，在简化或特殊情况下可作为声源）
- 硬/软声场边界（默认硬声场边界，主要是反射边界）
- 预置阻抗边界
    - RCL等效电路
    - 人耳和人皮肤的生理学模型
    - 多孔板
- 内部多孔板
- 辐射边界
    - 平面波、柱面波、球面波
    - 入射压力场（经常作为声源设置的功能）
- 完美匹配层（PML）——— 通过边界急速拉伸来实现无放射的情况，也可在结构模拟中实现
    - 频域和时域
    - 多孔弹性和弹性波
    - 流体和结构声学混合模型
    - 气动声学
- 外场计算（看空间外某一个点的声压）
    - 确定计算域外部的声场
    - 方便后处理的预置绘图类型

1.4. 特殊的边界条件 —— 高级周期性边界条件
- 类型
    - 连续和反周期性
    - Floquet周期：定义k矢量
    - 循环对称：定义方位模式数m 以及扇形角$\theta$
- 数据集
    - 周期性条件模型对应2D和3D阵列数据集
    - 循环对称模型对应2D和3D扇形数据集
- 适用于
    - 压力声学、热粘性声学
    - 线性Euler、线性Navier-Stokes
    - 弹性波（固体力学）
    - 电场（压电）

1.5. 端口边界
- 端口边界条件
    - 圆形和矩形端口的解析模式计算
    - 数值端口用于任意截面
    - 波导入口/出口条件
    - 多模扩展
    - 散射矩阵（s参数）和传递矩阵计算
    - 传输和插入损耗计算
- 集总端口条件
    - 波导域和外部集总模型的接口
        - 电路和两端口表达式
    - 电声应用

1.6. 热黏性边界层损耗模型
- 热黏性边界层损耗的均质化和近似
- 狭窄区域声学
    - 域特征
    - 恒定截面波导
    - 狭缝，圆形和方形波导模型
- 热黏性边界层阻抗
    - 边界条件公式
    - 任意形状表面
    - 使用于非重叠边界层

1.7. 用于大型压力声学模型的求解器设置
- 转移拉普拉斯选项
    - 确保有限元模型在高频求解时的收敛性
- 域分解迭代求解器
    - 集群分布式计算

1.8. 边界元（可用于实现声传播的部分）
- 压力声学接口
    - 用于处理散射和辐射问题
    - 模型维度：3D和2D
    - 物理场：功能与FEM接口类似
    - 研究类型：频域
- 支持多物理场耦合
    - 纯BEM模型
    - BEM-FEM耦合模型
    - 均可与结构耦合
- 特征/概念
    - 选择：无限空间和有限空间
    - 类似于辐射+外场计算的整合
    - 使用栅格数据集进行后处理

1.9. 稳定的BEM方程
- 基于BEM的压力声学，边界元接口的新型稳定方程
- 确保大计算量声学模型（高频且/或大型模型）的收敛性

1.10. 间断伽辽金，时域显式：应用领域（应用于瞬态）
- 时域问题
    - 非谐波数据（脉冲、调制信号）
    - 瞬态过程
    - 渡越时间计算
- 大型声学域中的波传播（$L>N \lambda$）
    - 超声设备（流量计、无损检测）
    - 大型域中的低频波（地震波、水下声学）
    - 全波解析室内声学及车内声学

1.11. 声学模块中的时域显式接口
- 物理场接口
    - 压力声学，时域显式
    - 对流波动方程，时域显式
    - 弹性波，时域显式
    - 非线性压力声学，时域显式
- 多物理场接口
    - 声-结构相互作用，时域显式

## 二、弹性波

2.1 固体和流体中的波比较
- 固体中可有压力波和剪切波
- 流体中只有压力波

2.2 弹性波
- 用于模拟
    - 固体和多孔材料中的弹性波/声波
    - 压电材料
- BAW、SAW、Lamb波、首波等
    - 全部使用完整方程进行建模
- 多种公式
    - 有限元法（FEM）（就是固体力学接口，只需要激励条件，网格剖分即可实现）
    - 间断伽辽金（dG-FEM），时域显式（看到时域显式即表示采用间断伽辽金法；模拟大型应力波传递问题，可以其他接口进行耦合）
- 可实现多物理场耦合

2.3 弹性波，时域显式
- 求解大型线弹性波传播问题
- 固体材料/传播介质
    - 各项同性、正交各项异性、各向异性材料
    - 瑞利阻尼模型
    - 材料不连续处理
- 开放空间波传递
    - 吸收层
    - 低反射边界
- 可实现多物理场耦合

## 三、声-结构相互作用
3.1 声-结构相互作用
- 预置声域结构组件的多物理场耦合接口
    - 耦合到固体
    - 耦合到壳/多层壳
    - 耦合到膜
    - 耦合到刚体域
    - 混合FEM-BEM方法
    - 结构力学接口耦合到边界元接口
- 预置的多物理场接口

3.2 声-压电相互作用
- 多物理耦合接口
    - 压力声学
    - 固体力学
    - 静电
- 预置的多物理场耦合
    - 压电效应用于耦合静电和固体力学
    - 声-结构边界用于耦合声学域（BEM和FEM）
- 频域和瞬态




## 、结构振动的仿真分析
### 1. 结构动力学
- 与弹性力、粘滞力，以及外部负载相比，惯性力十分显著
    >$m\ddot{u} + c\dot{u} + ku = f(t)$   
    >惯性力 粘滞力  弹性力  载荷

### 2. 分类
- ![本地路径](comsol_pics\categories_of_structural_mechanics.png "结构动力学的分类")

### 3. 研究类型
- 涉及到的频域计算均为线性扰动，即简谐振动

### 4. 频域概述
$$M\ddot{u} + C\dot{u} + Ku = f(t)$$
$$f(t) = \tilde{f}e^{i\omega t} \qquad u(t) = \tilde{u}e^{i\omega t}$$
$$ (-\omega^2M + i\omega C + K)\tilde{u} = \tilde{f} $$
$$\tilde{u} = u_r + iu_i $$
- 在一定频率下的稳定状态解
    - 频率响应
    - 特征频率分析
- 激励和响应为简谐式
    - 线性
    - 扰动
- 所有均按复数计算，给出幅值和相位信息
- 材料属性和载荷可以按复数计算
    - 任何地方都可以输入复数
    - 一些节点含有相位子节点

### 5. 特征频率分析
- 无外加载荷的自由简谐振动
    - 对各个$\omega$(特征频率)，会有一个对应的振型/模态
        >$(-\omega^2M + i\omega C + K)\tilde{u} = 0$
- 可计算过阻尼特征频率
    - 无专用求解器；阻尼效应会被自动计入模型
    - 包含阻尼的特征频率一般为复数特征频率
    - 特征模态可能是复数形式
- 载荷效应被忽略，除非他们能提供一定刚度或自拟（如取决于位移或速度）
    - 如跟随载荷（压力）
- 非零预位移被设为零
- 特征模态振幅是任意的，不是准确的振幅
    - 可选用三种不同的缩放方式（均方根、最大值、质量矩阵）
    - 若要知道准确的振幅，可在计算出的频率附近做扫描计算（扫频）
### 6. 特征频率结果
- 计算组中的表格
    - 特征频率
        - $\omega_r$ -> 频率
        - $\omega_i$ -> 阻尼
    - 相对阻尼
        - $\zeta \approx \omega_i / \omega_r$
    - 品质因子
        - $Q = 1/(2\zeta)$
- 当打开模型时，需要更新表格
    - 更新步骤：设置 -> 计算组 -> 计算
- 参与因子
    - 质量可通过各模态反应
### 7. 频率响应
- 对一组简谐载荷的稳态响应
- 通常按“频率扫描”计算
- 载荷和材料属性可设为频率相关
    - 使用变量名freq
    - 模态叠加（分析）时假定材料属性频率独立
- 当绘制变量$v$时，实际上展示的是该复数的实部
    - 实部给出当前相位角下的值
    - 相位角通过数据集设定
    - 算子real(), imag(), abs(), 及arg()常用来提取特定部分或值
- 通常我们对复制abs(v)更感兴趣
- 使用从频域到时域FFT研究步骤从频率结果创建时域解
- 频响分别两个频率下的结果（幅值和相位）
- 为了找到组合响应峰值需要转换到时域

### 8. 广义周期性激励
- 计算载荷的FFT
    - 需要一个辅助全局DOF 'q'以及时域解
- 对所有主要频率计算扫频
    - 载荷表达式依赖freq
- 通过逆FFT再度转换到时域解
### 9. 时域分析
- 非稳态问题
- 非线性问题
    - 例外：模态叠加（瞬态模态）
    - 如碰撞、非线性载荷
- 对动力学问题***广义$\alpha$求解器是***首选
    - 设置方法：瞬态求解器里 -> 时间步进 -> 广义$\alpha$
    - BDF具有更高数值阻尼
- 隐式求解器
    - 可采用较大时间步长
    - 并非特别适用于冲击与波传播；每计算步长计算量较大
- 自动时间步长控制
    - 容差常需要收紧
- 结果须对许多时间步做存储
- 降低文件大小
    - 不要存储时间导数
    - 不要存储反作用力
    - 仅存储所选结果
    - 使用探针
### 10. 预应力分析
- 拉伸应力通常会提高特征频率（应力强化）
    - 此时要先做稳态频率分析，然后再做频域扰动
- 预应力分析要求有前一阶段的应力状态
    - 通常为稳态解
    - 也可只是初始应力
- 预应力研究包含2或3个研究步骤
    1. 稳态分析（稳态，特征频率）
    2. 特征频率或频域分析（稳态，频域扰动）
    3. 可能的模态叠加（稳态，特征频率，瞬态稳态）
- 在预应力分析中，有必要将稳态载荷与附加简谐载荷分开
    - 选择谐波扰动加载频域扰动步骤载荷
    - 指示标志（~）会出现在节点图标上
    - 对约束，谐波扰动为子节点
    - 选择谐波扰动相当于使用linper()算子
### 11. 谐波扰动
- 谐波扰动用于：
    - 频域，预应力
    - 频域，模态
    - 频域，模态，预应力
- 不可用于
    - 频域
- 谐波扰动在将线性设为线性扰动下会被激活
    - 可在默认研究步骤基础上取舍
- 对扰动解，所有结果设置都将有下拉菜单 计算表达式
    - 可能会对预载荷解预计扰动解的组合感兴趣
### 12. 模态叠加
- 响应被计算为一系列特征模态的叠加
- 自由度数量与所用特征模态数量相同，通常为10-100
- 由于频率信息已知，频域计算过特别
- 阻尼可对各模态分别预先设定

## 气动声学
### 1. 气动声学
- 对流声学（载流噪声）
- 扰动方程
- 输入
    - 材料属性
    - 稳态背景流
- FEM或dG-FEM稳定型方程
- 假设
    - 线性声学
    - 非流致噪声
    - 包含不同程度细节的对流声学
### 2. Navier-Stokes方程
- ![本地路径](comsol_pics\navier-stokes_equation.png)

### 3. 压力，温度，和速度
- 声波是$\color{red}微小$声学扰动下的压缩波
- 声压变化$p$，温度$T$，速度场$u$, 和密度$\rho$
![相对路径](comsol_pics\pressure,temperature,and_velocity.png)
这是所有线性声学的第一阶段，然后再考虑控制方程

### 4. COMSOL中的声学模型
- ![本地路径](comsol_pics\acoustic_model.png)

### 5. 线性Navier-Stokes
- 流动和声学相互作用
    - 一般认为声场不影响流动，流动会影响声场
- 应用
    - 内部流场（流动管道）
    - 排气系统
    - 穿孔板和内衬层
    - 频域下的流固耦合FSI（包含背景流）
    - 燃烧不稳定性
- 以$(p, u, T)$表示且包含背景流场$(p_0, u_0, T_0)$的最详细“对流声学”
- 包括
    - 解析粘性与热边界层
    - 模拟湍流导致的衰减：耦合湍流粘度
    - 反应项导致的剪切、熵变和声（压力波）的相互作用
    - 频域下的流固耦合（FSI）
    - 对流梯度导致的相互作用
- 控制方程
![本地路径](comsol_pics\governing_equation.png)

### 6. 频域下的流固耦合（FSI）
- 重要应用领域
- 有流稳态系统下的线性响应
- 降低计算成本
    - 稳态CFD
    - 频域LNS
- 在COMSOL中预置了与结构的多物理场耦合

### 7. CFD和声学间的网格映射
- 将CFD的背景流场解映射到声学网格上是个非常重要的步骤
    - 不同网格
    - 不同集散阶次
    - 添加与网格相关的平滑过渡
- 反应项如$(v \cdot \delta )u_0$等会给声学解引入较大误差和噪音
- 可参考帮助文档和教学模型