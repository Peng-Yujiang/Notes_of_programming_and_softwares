# Python相关
## 1. 文本读取相关
### 1. 编码错误相关
1. > UnicodeDecodeError: 'utf-8' codec can't decode byte 0x89 in position 0: invalid start byte
    - **确保在Windows和Ubuntu中均可用**
```python
csv_data.to_csv(CSV_FILE, index=False, encoding='utf-8-sig', lineterminator='\n') # 保存csv
data = pd.read_csv(filename, encoding='utf-8')  # 读取csv
```

## 2. **Ubuntu平台和WIndows平台编码不一致导致在的问题**
### 1. 在Windows平台生成了文本文件, 在Ubuntu平台使用时出现问题
1. 显示错误: *** stack smashing detected ***: terminated
    - 解决方法: 重新生成

# 编译相关
## 1. 工具
### 1. MinGW64下载及使用
1. [下载地址](https://github.com/niXman/mingw-builds-binaries/releases?page=1)
2. 将`mingw64\bin`文件夹路径添加到Windows系统路径中
3. 检查MingGW安装情况，在cmd中运行下列命令
```bash
g++ --version
mingw32-make --version
```

## 2. 常用编译命令
### 1. 文件夹相关操作
1. 判断文件夹是否存在及新建
```bash
clear   # 清理窗口
if [ ! -d build_win ];then
    mkdir -p build_win
fi
cd build_win
```

2. 检查是否有文件
```bash
data_path="test/test_code"
# 检查是否有任何数据文件
data_files=("$data_path"/*)
if [ ${#data_files[@]} -eq 0 ]; then
   echo "test/test_data 文件夹中没有数据文件。"
   exit 1
fi
```

3. 遍历数据执行程序
```bash
data_path="test/test_code"
# 遍历 data 文件夹中的每个文件并运行程序
for data_file in "${data_files[@]}"; do
   if [ -f "$data_file" ]; then
      file_name=$(basename "$data_file")
      log_file="logs/${current_time}/${file_name}.txt"
      image_file="logs/${current_time}/${file_name}.png"

      echo "运行程序，使用数据文件：$data_file"
      echo "          日志保存到：$log_file"
      echo "          图像保存到：$image_file"
      echo "./build/test/imuhmr_node_random_forest $data_file $log_file"
      # yes "" | ./build/test/imuhmr_node_random_forest "$data_file"  "$image_file" > "$log_file" 2>&1
      ./build/test/imuhmr_node_random_forest "$data_file"
      # > "$log_file" 2>&1

      if [ $? -ne 0 ]; then
         echo "运行程序时出错，详见日志文件：$log_file"
         cat "$log_file"  # 输出日志文件内容
         exit 1
      fi

      # # 检查图像是否成功生成
      # if [ ! -f "$image_file" ]; then
      #    echo "图像文件未生成：$image_file"
      #    exit 1
      # fi
   fi
done
```

## 3. 跨平台编译
### 1. 判断当前平台
```bash
#!/bin/bash
#这里是选择解释器，可以不加，会根据平台自动选择
#!/bin/sh

if [[ "$(uname -s)" == *"_NT-"* ]]; then
    echo "This is Windows"
    # Windows specific commands
    #cmd /c ".\test\model_data_c_app.exe"    # 实际上只能调出cmd界面
    ".\test\model_data_c_app.exe"   # 可直接运行
elif [[ "$(uname -s)" == "Linux" ]]; then
    echo "This is Linux/Ubuntu"
    # Linux/Ubuntu specific commands
    ./test/model_data_c_app
else
    echo "Unknown OS"
fi
```


### 2. 运行`.sh`脚本
1. Ubuntu平台可以直接运行
2. Windows平台上使用`Git Bash`

 ### 3. Windows平台编译可执行程序
 1. 安装vcpkg

 ```bash
 git clone https://github.com/microsoft/vcpkg.git
 ```

2. 集成 vcpkg 到项目
    - Visual Studio 项目：如果使用 Visual Studio，可以通过以下方式自动集成
    - CMake 项目：可以通过在 CMakeLists.txt 中添加以下行来集成 vcpkg

```cmakelists
set(CMAKE_TOOLCHAIN_FILE <vcpkg-root>/scripts/buildsystems/vcpkg.cmake)
```
    

3. 安装库
```bash
# 1.安装boost库 32位/64位
vcpkg install boost:x86-windows
vcpkg install boost:x64-windows
# 2.查看已安装列表
vcpkg list
# 3.引入项目组中
.\vcpkg integrate install

vcpkg install yaml-cpp  # 安装 yaml-cpp 库
vcpkg install freeglut  # 安装 freeglut 库
vcpkg install glog      # 安装 glog 库
vcpkg install gflags    # 安装 gflags 库
vcpkg install Eigen3    # 安装 Eigen3 库
vcpkg install Ceres     # 安装 Ceres 库
``` 

4. glog问题
- #error: ＜glog/logging.h＞ was not included correctly.
    - 解决方法：在`#include <glog/logging.h>`前添加`#define GLOG_USE_GLOG_EXPORT`

5. freeglut文图
- LNK1107: 文件无效或损坏: 无法在 0x2A9 处读取
    - 原因：文件类型与实际不一样
    - 解决方法：该链接库的地方就要链接库，不能是头文件
    ![CMake截图](assert\1.CMake_compile_exe.png)

 ## 软件使用问题
 ### 1. VirtualBox
 1. [宿主机和虚拟机无法共享粘贴板](https://blog.csdn.net/zc375107867/article/details/126380791)