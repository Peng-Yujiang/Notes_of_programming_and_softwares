1. [服务器代码管理](#服务器代码管理)
2. [本地代码存放与管理](#本地代码存放与管理)
3. [代码编译与功能验证](#代码编译与功能验证)
4. [虚拟机](#虚拟机)
   1. [Windows镜像](#windows镜像)
   2. [Virtualbox](#virtualbox)
5. [文档过程记录](#文档过程记录)
6. [个人建议](#个人建议)

# 服务器代码管理

1. 熟悉git使用
    1. [基础教程](https://www.runoob.com/git/git-branch.html)
    2. 下载（clone）、更新（pull）、暂存更改（stash）等操作
    3. 查看分支（branch）、切换分支（checkout）、查看状态（status）、更新情况（log）等
    4. 提交代码（commit）、推送（push）等操作
2. 针对适配的硬件建立分支
3. 提交代码时需要有合适的说明（做了哪些修改、修复了哪些问题等）
4. 重大更新变更版本号时，在提交代码的说明里包含版本号

# 本地代码存放与管理

1. 一般一个算法会适配多个硬件平台，因此本地的代码可以根据大的硬件平台（主要指MCU/SoC）分开进行存放，防止弄混
    1. 如3DoF库（MetaboundsNavigation），会适配：
        1. 指环（嵌入式系统，ap3blue芯片）
            1. 通过keil编译
            2. 算法库为.lib格式
            3. [【A02指环】研发端基本操作介绍](https://alidocs.dingtalk.com/i/nodes/X6GRezwJlLX0emd6UGnkdeGGJdqbropQ?cid=2129392127:3769467638&corpId=ding161a0d6f75cabce8ee0f45d8e4f7c288&doc_type=wiki_doc&iframeQuery=utm_medium=im_card&utm_source=im&utm_medium=im_card&utm_scene=person_space&utm_source=im)
            4. 旧版刷机工具：（强制刷机模式下任何版本均可刷/ota）
            5. 新版刷机工具：（可以标定，切换工厂/用户模式，刷机）
            6. 指环名称为Mo Ring用旧版，否则用新版。
        2. 基于MCU的眼镜（嵌入式系统、ap4芯片，单色）
            1. 通过命令行，在固件代码指定文件夹内编译（需要特定的文件）
            2. 算法库为`.lib`格式
            3. [【3DoF】环境、编译及刷机](https://alidocs.dingtalk.com/i/nodes/LeBq413JA2jDBk3QU41aBlko8DOnGvpb?utm_scene=team_space)
        3. 基于SoC的眼镜（安卓系统，W517芯片，彩色），这些平台需要的库的形式
            1. 通过命令行直接编译
            2. 需要适配安卓64位和32位系统
            3. 还需要注意兼容的sdk及ndk版本，参考这个文档：[算法验证demo](https://alidocs.dingtalk.com/i/nodes/wva2dxOW4DArRBbZI6E0BpymWbkz3BRL?utm_scene=team_space)
            4. 算法库为`.so`格式
    2. 如针对指环的算法库：
        1. 可以新建一个Ap3blue_ring的文件夹，
        2. 将相关的算法库代码（如3DoF库）放在这个文件夹里
    3. 其它算法的开发：
        1. 新建对应的文件夹（如PDR算法）
        2. 将相关代码放置在该文件夹中
            1. 如进行功能验证的python脚本
            2. 用于部署到硬件平台的（C/C++）工程代码，包含编译、离线功能验证模块等部分
2. 发布的算法库应该包含
    1. 版本号；
    2. 本地/服务器备份，文件夹命名方式参考`V0.0.7_AHRS_lib_20240910`；
    3. 发布之前应该在实际硬件上验证通过；
    4. 确认问题后要给出明确的解决时间和方案

# 代码编译与功能验证

1. 熟悉CMake基本操作及CMakeLists.txt文件编写
    1. 参考链接：<https://blog.51cto.com/u_12204415/3804353>
    2. 可以参考<http://192.168.1.132:8080/depth-group/SensorHub-IMU>，了解
        1. 如何包含代码文件夹
        2. 如何将源文件编译成库
        3. 如何编译可执行文件，并链接需要的库
        4. 以及其他基本操作
    3. 更复杂的工程可参考其他代码仓库
2. C/C++基本知识
    1. 基本语法
    2. 宏定义
    3. （智能）指针
    4. 类
    5. 内存申请及释放
    6. 回调函数
3. 调试的基本方法

# 虚拟机

## Windows镜像

1. smb://192.168.1.132/技术中心/算法部/software/Win11_Chinese(Simplified)_x64v1.iso

## Virtualbox

1. 安装virtualbox虚拟机
2. 安装扩展`Oracle VM VirtualBox Extension Pack`
3. 在虚拟机设置：
    1. 启用串口：`串口 > 启用串口`
    2. 启用USB设备：`USB设备 > 启用USB控制器 > USB 3.0 (xHCI)控制器`
    3. 启用共享文件夹：`共享文件夹 > 点击右侧添加共享文件夹图标 > 选择共享文件夹路径 > 勾选自动挂载`
4. 虚拟机中使用USB设备
    1. 鼠标右键点击右下角第5个图标
    2. 在弹出的USB设备列表中勾选需要的设备即可正常使用

# 文档过程记录

1. 在算法部知识库/工作进展中建立以自己名字命名的文件夹；
2. 文档编写要注意规范：
    1. 使用分级标题让**层次更清晰**，便于阅读；
    2. 一般采用默认字号，插图文字尽量与正文大小一致；
    3. 插图要有图例、刻度、轴名等必要信息，只看图即可获得图中信息；
3. 将工作日常的过程、结果、分析和讨论记录在文档中，文档以**逆序的形式记录**；
4. 进展、遇到的困难等记录到工作进展中，便于讨论、分析、及复盘；
5. 问题分析解决过程中记录原因、解决方式、结果验证等，便于以后遇到类似的问题可以快速解决；
6. 经常总结日常知识、经验等内容，放到技术沉淀中，与大家共同进步。

# 个人建议

1. 如果问题思考不清楚，可以先以文档的形式归纳梳理；
2. 如果一个问题超过半天、甚至一天都没有解决，那么及时找大家讨论，寻找解决方案；
